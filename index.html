<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>南竿鄉公所 - 便民服務手冊</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com/"></script>
    <!-- React & ReactDOM CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f1f5f9;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }

        .phone-frame {
            box-shadow: 0 50px 100px -20px rgba(0,0,0,0.3), 0 30px 60px -30px rgba(0,0,0,0.4);
            border: 12px solid #1e293b;
            background: #1e293b;
        }

        .shadow-rose-custom { box-shadow: 0 10px 25px -5px rgba(225, 29, 72, 0.4); }
        .font-black { font-weight: 900 !important; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 1. 圖標與工具定義 ---
        const ICON_PATHS = {
            Sparkles: <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />,
            Phone: <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />,
            MapPin: <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></>,
            ArrowRight: <path d="M5 12h14m-7-7 7 7-7 7" />,
            ChevronRight: <path d="m9 18 6-6-6-6" />,
            ChevronLeft: <path d="m15 18-6-6 6-6" />,
            Baby: <><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/><path d="M12 18v3"/><path d="M8 21h8"/></>,
            Heart: <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />,
            Users: <><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M17.5 7a4 4 0 1 0-3 6.87"/></>,
            Building2: <><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 18h12"/><path d="M6 14h12"/><path d="M6 10h12"/><path d="M6 6h12"/></>,
            Stethoscope: <><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v1a6 6 0 0 0 6 6h2a6 6 0 0 0 6 6v-4"/><circle cx="20" cy="10" r="2"/></>,
            Scale: <><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h18"/></>,
            Medal: <><path d="M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.8 15"/><path d="M12 12 7 22l5-3 5 3Z"/><circle cx="12" cy="7" r="3"/></>,
            Trash2: <><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></>,
            Milestone: <><path d="M18 2v10H6V2Z"/><path d="M12 12v10"/><path d="M6 6H4a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h2"/><path d="M18 10h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"/></>,
            CircleDot: <><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="1"/></>,
            ShieldCheck: <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10zM9 12l2 2 4-4" />,
            Info: <><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="16" y2="12"/><line x1="12" x2="12.01" y1="8" y2="8"/></>,
            CheckCircle: <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14M22 4 12 14.01l-3-3" />,
            FileText: <><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></>,
            Signal: <path d="M2 20h.01M7 20h.01M12 20h.01M17 20h.01M22 20h.01M12 15h.01M17 15h.01M22 15h.01M17 10h.01M22 10h.01M22 5h.01" />,
            Wifi: <path d="M5 12.55a11 11 0 0 1 14.08 0M1.42 9a16 16 0 0 1 21.16 0M8.53 16.11a6 6 0 0 1 6.95 0M12 20h.01" />,
            Battery: <><rect width="16" height="10" x="2" y="7" rx="2" ry="2"/><line x1="22" x2="22" y1="11" y2="13"/></>,
            Zap: <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />,
            Search: <><circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/></>,
            Truck: <><rect width="16" height="13" x="2" y="4" rx="2"/><path d="M18 8h3l3 3v8h-3"/><circle cx="7" cy="19" r="2"/><circle cx="20" cy="19" r="2"/></>,
            ClipboardCheck: <><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="m9 14 2 2 4-4"/></>,
            Calendar: <><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></>,
            IdCard: <><path d="M16 10h4v11H4V10h4"/><path d="M15 2H9v7h6V2z"/><path d="M12 12v5"/><path d="M15 14h-6"/></>,
            History: <><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></>,
            Quote: <path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1 0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1ZM17 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1 0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1Z" />,
            Box: <><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></>,
            Recycle: <><path d="M7 11V7l-5 5 5 5v-4h3a7 7 0 0 1 7 7h4a11 11 0 0 0-11-11H7Z"/><path d="m15.3 9.3a7 7 0 0 1 1.7 4.7h4a11 11 0 0 0-11-11v4l5 5-5 5v-4"/></>
        };

        const Icon = ({ name, size = 24, className = "", strokeWidth = 2, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={`lucide-icon ${className}`} {...props}>
                {ICON_PATHS[name] || <circle cx="12" cy="12" r="1" />}
            </svg>
        );

        // --- 2. 全域輔助函式與資料 ---
        const getOfficeInfo = (idx) => {
            if (idx >= 4 && idx <= 24) return { dept: '社會課', ext: '53' };
            if (idx === 26 || idx === 27) return { dept: '財經課', ext: '32' };
            if (idx === 29 || idx === 30) return { dept: '民政課', ext: '56' };
            if (idx === 31) return { dept: '民政課', ext: '26' }; 
            if (idx === 32) return { dept: '民政課', ext: '22' };
            if (idx === 33) return { dept: '環保課', ext: '62' };
            // 生命園區專區 (34 為目錄，35-41 為細項)
            if (idx >= 34 && idx <= 41) return { dept: '民政課', ext: '26' }; 
            return { dept: '民政課', ext: '22' }; 
        };

        const renderHighlightedText = (text) => {
            if (!text) return "";
            const regex = /(\d{1,3}(?:,\d{3})*(?:元|萬元)|[零一二三四五六七八九十百千万億壹貳參肆伍陸柒捌玖拾佰仟萬]+元)/g;
            const parts = text.split(regex);
            return parts.map((part, i) => regex.test(part) ? <span key={i} className="text-rose-600 font-bold">{part}</span> : part);
        };

        const ContactGrid = ({ idx, customContact }) => {
            const info = getOfficeInfo(idx);
            const displayExt = customContact ? customContact : `22757 分機 ${info.ext}`;
            return (
                <div className="grid grid-cols-2 gap-4 my-6 font-black">
                    <div className="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center justify-center text-center shadow-sm font-black">
                        <span className="text-[10px] text-slate-400 uppercase tracking-widest mb-1 font-black">承辦課室</span>
                        <span className="text-rose-600 text-lg font-black">{info.dept}</span>
                    </div>
                    <div className="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center justify-center text-center shadow-sm font-black">
                        <span className="text-[10px] text-slate-400 uppercase tracking-widest mb-1 font-black">聯絡電話</span>
                        <span className="text-rose-600 text-[0.85rem] font-black">{displayExt}</span>
                    </div>
                </div>
            );
        };

        const militaryServicesList = [
            { title: "入營役男體位複檢", icon: "ClipboardCheck", color: "blue", docs: ["申請書二份（本所提供）、私章", "全戶戶籍謄本二份", "在營證明", "醫院診斷證明書一份"] },
            { title: "役男延期入營申請", icon: "Calendar", color: "emerald", docs: ["畢業證書影印本一份", "醫院診斷證明書一份", "報考國家考試通知單", "國民身分證、私章"] },
            { title: "替代役轉、免除、禁役證明", icon: "ShieldCheck", color: "indigo", docs: ["身分證", "私章", "證明文件"] },
            { title: "服兵役證明申請", icon: "FileText", color: "amber", docs: ["國民身分證", "印章"] },
            { title: "役男家屬及遺屬補助", icon: "Heart", color: "rose", docs: ["國民身分證", "私章", "相關證明"] },
            { title: "役男免禁役證明核發", icon: "IdCard", color: "cyan", docs: ["身分證、私章、二吋照片乙張", "遺失補發須覓保證人一名"] },
            { title: "國民兵身分換補發", icon: "Users", color: "violet", docs: ["身分證、私章、二吋照片乙張", "保證書"] },
            { title: "自衛隊年資時次證明", icon: "History", color: "slate", docs: ["年資證明申請表", "任公職前戶籍謄本"] }
        ];

        const womenServices = {
            milkDiaper: { title: "奶粉尿布補助", subTitle: "嬰幼兒補助", icon: "Baby", condition: "設籍本縣0-2歲嬰幼兒且父母之一方亦設籍本縣滿一年以上且累計設籍滿5年。", documents: ["嬰幼兒奶粉及尿布補助申請表", "申請人一方郵局存簿封面影本", "子女戶口名簿影本或戶籍謄本", "大陸地區人民或外國籍人士請附居留證"], notice: "1. 兒童出生後六十日內完成登記並申請者，得追溯發給。\n2. 本津貼申請案件以備齊應附文件之日為受理申請日。", contact: "22757 分機53" },
            maternity: { title: "婦女生育補助", subTitle: "生育支持", icon: "Heart", condition: "出生嬰兒父母之一在本縣設籍需滿一年以上且累計設籍滿二年者。", amounts: [{ label: "第一胎", value: "20,000", unit: "元" }, { label: "第二胎", value: "50,000", unit: "元" }, { label: "第三胎(含以上)", value: "80,000", unit: "元" }], amountDesc: "申請補助者，以設籍本縣之日後出生之胞胎起算：", documents: ["婦女生育補助申請表", "出生證明書", "戶籍謄本", "私章"], notice: "於生產後三個月內向本所提出申請，逾期視同放棄補助。", contact: "22757 分機53" },
            nutrition: { title: "孕婦營養補助", subTitle: "母體健康", icon: "Apple", condition: "孕婦 or 配偶之一方必須設籍本縣滿1年以上且累計設籍滿5年。", documents: ["孕婦營養補助申請表", "印(寫)有姓名之孕婦健康手冊封面及產檢紀錄表影本各1份", "申請人臺灣銀行 or 郵局存摺封面影本", "夫妻雙方戶口名簿(應記載詳細記事)"], notice: "自申請審核通過後，每月補助1,500元(每季最高補助 4,500元）。", contact: "22757 分機53" },
            prenatalTravel: { title: "孕婦赴台產檢補助", subTitle: "交通補助", icon: "Plane", condition: "一、取得孕婦健康手冊。\n二、設籍本鄉滿1年以上且維累計設籍滿5年者。", standard: "1. 補助工具：國內公、民營海、空交通工具自付之費用。\n2. 補助比例：孕婦本人全額補助，配偶 1/2 補助。\n3. 限制：最高補助 4 次來回(限機票或船票)。", documents: ["南竿鄉孕婦赴台產檢交通補助申請表", "孕婦手冊封面及產檢紀錄影本", "往返機票或船票正本", "臺灣銀行或郵局存摺封面影本", "夫妻戶籍謄本(應記載詳細記事)"], notice: "受理補助期限自每年1/1至12/31止，可一次檢具4趟文件辦理核結。", contact: "22757 分機53" },
            assistedReproduction: { title: "接受人工生殖補助", subTitle: "技術補助", icon: "Sparkles", condition: "一、不孕夫妻雙方年滿20歲，任一方設籍本鄉滿3年且具合法婚姻關係者。\n二、經合法醫療機構診斷，確需接受人工生殖治療者。", standard: "● 補助項目：體外受精、配偶間人工授授精。\n● 補助金額：每兩年補助一次，每次最高 5 萬元。", documents: ["補助申請表", "夫妻雙方身分證", "戶籍謄本", "醫師診斷證明", "醫療收據正本", "金融機構存摺封面"], notice: "應於首次診療日後六個月內提出申請。", contact: "22757 分機53" },
            childcareUnder2: { title: "未滿二歲育兒津貼", subTitle: "育兒津貼", icon: "Smile", condition: "設籍本縣0-2歲嬰幼兒且父母之一方亦設籍本縣滿一年以上且累計設籍滿5年。", documents: ["育兒津貼申請表", "全戶戶口名簿影本", "金融帳戶影本", "第2名以上子女證明"], notice: "得追溯自出生月份發給。", contact: "22757 分機53" },
            childcare2to5: { title: "育兒津貼", subTitle: "二歲以上未滿五歲育兒津貼", menuTitle: "二歲以上未滿五歲育兒津貼", icon: "Smile", condition: "設籍本縣2歲以上至未滿5歲幼兒，且父母一方設籍本縣滿一年以上且累計設籍滿5年。", documents: ["申請表", "全戶戶口名簿影本", "申請人一方存摺封面"], notice: "若幼兒已就讀公立兒園者，領取規定依教育部準則辦理。", contact: "22757 分機53" },
            therapy: { title: "發展遲緩兒童補助", subTitle: "療育補助", icon: "Activity", condition: "持有認證醫院開具之綜合報告書 or 證明書之發展遲緩兒童。", documents: ["申請書", "全戶戶口名簿影本", "診斷證明/綜合報告書影本", "醫療收據正本", "領款收據及存簿影本", "搭機證明或相關文件"], notice: "申請時間於治療日期起算三個月內提出。", contact: "22757 分機53" }
        };

        const lifeParkServices = {
            hall: { 
                title: "禮廳使用申請", icon: "Milestone", subTitle: "生命園區禮廳", 
                condition: "每日1,000元(含家屬休息室，收費計價不足一日以一日計)。", 
                documents: ["申請書", "死亡證明書", "受託辦理申請者，並應檢附委託書、委託人身分證影印本及受託人身分證明文件"], 
                notice: "1. 租用禮堂，應嚴守許可時間，不得藉故拖延，否則本所有停止使用權。\n\n2. 禮堂佈置，應莊嚴肅穆，喪家不得擅自改變本鄉殯儀館內設施，如有損壞，應負賠償責任。", 
                contact: "22757 分機 26" 
            },
            park: { 
                title: "納骨堂使用申請", icon: "Milestone", subTitle: "生命園區納骨堂", 
                condition: "骨骸罈區使用費新台幣7,500元, 管理費2,000元。\n骨灰區使用費新台幣5,000元, 管理費2,000元。\n牌位區使用費新台幣3,000元, 管理費2,000元。", 
                documents: ["申請書"], 
                notice: "1.使用本鄉納骨堂者，應向本所辦理進堂許可申請並繳納使用費，經辦妥手續後限一個月內將骨罈或骨灰箱移進堂內，而進堂之骨骸(灰)罈應依照本所規定之塔位規格安置以維整齊。\n\n2.中途退堂者應向本所申請註銷，已繳各項費用不予退還。", 
                contact: "22757 分機 26" 
            },
            freezer: {
                title: "遺體冷藏申請",
                icon: "Milestone",
                subTitle: "生命園區冷藏",
                condition: "每日新台幣500元(收費計價不足一日以一日計)。",
                documents: ["申請書", "死亡證明書", "申請人身分證及私章"],
                notice: "遺體冷藏室使用以十四日為限，超過日數起加倍收費。",
                contact: "22757 分機 26"
            },
            cremation: {
                title: "火化場申請",
                icon: "Milestone",
                subTitle: "生命園區火化場",
                condition: "遺體火化費用每具新台幣2,000元，撿骨火化費用每具新台幣1,000元。",
                documents: [
                    "申請書", 
                    "死亡證明書", 
                    "受託辦理申請者，並應檢附委託書、委託人身分證影印本及受託人身分證明文件"
                ],
                notice: "1.遺體火化時，家屬或受委託之代辦業者請在家屬休息室等待撿骨，若因天然災害或不可抗力之原因，致遺體發生損害情事，本所不負賠償責任。\n\n2.遺體火化後，請家屬或代辦業者會同工作人員撿骨裝罐，並登記焚化紀錄表，交家屬簽名領回，其逾一周未領回之骨灰由本所通知申請人或受委託之業者處理，其所需費用應申請人或業者負擔。",
                contact: "22757 分機 26"
            },
            cemetery: { 
                title: "公墓區申請", icon: "Milestone", subTitle: "生命園區公墓", 
                isTable: true, 
                tableHeaders: ["項目", "數量", "使用費", "管理費"],
                tableRows: [
                    ["第一墓區雙穴", "1座", "15,000元", "20,000元"],
                    ["第一墓區單穴", "1座", "7,500元", "10,000元"],
                    ["第二墓區雙穴", "1座", "40,000元", "20,000元"],
                    ["第二墓區單穴", "1座", "20,000元", "10,000元"],
                    ["第二墓區雙穴墓體(含墓基)", "1座", "440,000元", "20,000元"],
                    ["第三墓區單穴起掘墓區", "1座", "5,000元", "10,000元"]
                ],
                documents: ["除戶戶籍謄本", "死亡證明書"], 
                notice: "1. 依據連江縣南竿鄉殯葬設施管理自治條例規定。\n2. 墓主不依規定建造者，本所得勒令停工並限期改善；逾期不改善者，本所得收回墓基使用權並退回繳交費用。", 
                contact: "22757 分機 26" 
            },
            incinerator: { title: "環保金爐收費標準", icon: "Milestone", subTitle: "生命園區金爐", condition: "0-800箱：0元 (500箱(含)以下免收禮廳租用費用)\n801-900箱：1,500元\n901-1000箱：3,000元\n1,001以上每滿100箱者：10,000元\n例如：\n1,001-1,100箱 1萬元\n1,101-1,200箱 2萬元\n1,201-1,300箱 3萬元……以此類推", documents: ["現場辦理"], notice: "依據連江縣南竿鄉殯葬設施管理自治條例收費標準辦理。", contact: "22757 分機 26" }
        };

        const elderlyServices = {
            dentures: { title: "假牙補助", subTitle: "長者假牙", icon: "Activity", condition: "一、設籍本縣滿三年之六十五歲以上老人(含55歲以上原住民).\n二、設籍條件：連續設籍本縣滿十年者 or 累計滿二十年者。", standard: "一生最高補助 4 萬元。", documents: ["申請書", "身分證影本", "合約醫院診斷證明", "身分證明文件(低收/中低收)"], notice: "一般戶超過 2 萬元部分需自付百分之十。", contact: "22757 分機53" },
            ferry: { title: "大陸交通船票補助", subTitle: "船票補助", icon: "Ship", condition: "年滿六十五歲以上且設籍本縣者。", standard: "● 往返一趟補助 50％。\n● 一年最高補助金額 2,500 元。", documents: ["身分證正反面影本", "往返船票票根", "金融機構存摺封面影本"], notice: "1. 先買全票，再申請補助。\n2. 12月搭乘者應於年度結束前完成申請。", contact: "22757 分機53" },
            pension: { title: "65歲以上養老金補助", subTitle: "銀髮扶助", icon: "Coins", condition: "設籍本縣滿三年之六十五歲以上老人。", documents: ["養老金補助申請表", "申請人身分證影本", "存摺封面影本", "私章"], notice: "經核定後，按月定期撥款至指定帳戶。", contact: "22757 分機53" },
            glasses: { title: "老花眼鏡補助", subTitle: "視力保健", icon: "Glasses", condition: "設籍本縣滿三年之六十五歲以上老人。", documents: ["申請表", "身分證影本", "私章", "購買收據正本"], notice: "每人每兩年限申請一次，最高補助新台幣500元。", contact: "22757 分機53" }
        };

        const socialServices = {
            disability: { title: "身心障礙津貼", subTitle: "身障扶助", icon: "ShieldCheck", condition: "設籍本縣持有身心障礙證明，且家庭收入財產符合標準者。", documents: ["申請表", "身障證明影本", "郵局存簿"], notice: "補助金額依障礙等級分級發給。", contact: "22757 分機53" },
            specialWomen: { title: "特殊境遇婦女扶助", subTitle: "婦女扶助", icon: "Heart", condition: "設籍本縣婦女，因配偶死亡、失蹤、家暴等特殊境遇者。", documents: ["扶助申請表", "相關證明文件", "存簿影本"], notice: "包含生活津貼及教育補助。", contact: "22757 分機53" },
            lowIncome: { title: "低收入戶資格認定", subTitle: "救助認定", icon: "Users", condition: "全家平均所得及財產低於規定標準者。", documents: ["申請表", "全戶財產及所得清單", "戶籍謄本"], notice: "每年定期總清查。", contact: "22757 分機53" },
            midLowElderly: { title: "中低老人生活津貼", subTitle: "老人救助", icon: "Clock", condition: "年滿65歲符合中低收入戶標準者。", documents: ["申請書", "身分證影本", "存摺封面影本"], notice: "按月發給。", contact: "22757 分機53" },
            midLowDisability: { title: "中低身障生活津貼", subTitle: "身障救助", icon: "ShieldCheck", condition: "領有身障證明且符合中低收入標準者。", documents: ["申請書", "身障證明", "存簿影本"], notice: "按月發給。", contact: "22757 分機53" },
            studentSubsidy: { title: "低收子女就學補助", subTitle: "學子扶助", icon: "BookOpen", condition: "低收入戶子女就讀高中職以上學校者。", documents: ["補助申請書", "在學證明"], notice: "每學期註冊後申請。", contact: "22757 分機53" },
            studentSubsidy: { title: "低收子女就學補助", subTitle: "學子扶助", icon: "BookOpen", condition: "低收入戶子女就讀高中職以上學校者。", documents: ["補助申請書", "在學證明"], notice: "每學期註冊後申請。", contact: "22757 分機53" },
            workRelief: { title: "以工代賑臨時工", subTitle: "安置計畫", icon: "Activity", condition: "低收 or 中低收具工作能力者。", documents: ["申請書", "身分證影本"], notice: "依課室缺額安排面試。", contact: "22757 分機53" }
        };

        const buildingServices = {
            oldHouse: { title: "舊有房屋建物證明", subTitle: "舊有房屋建物證明", icon: "Building2", condition: "房屋位於本鄉，可證明建築物為民國79年前既已存在者。", documents: ["申請書及切結書", "申請人身份證影本", "建築物平面圖及照片4張", "【證明文件擇一項目】", "房屋稅籍證明(建議優先檢附)", "供水、供電證明", "戶口遷入證明", "建物登記證明", "建築物完工證明", "土地現況調查清冊謄本"], notice: "證明文件請儘量提供足資證明之相關資料，以利審查。", contact: "22757 分機32" },
            utilityCert: { title: "建築物接水電證明", subTitle: "未領得使用執照之建築物接水電證明", icon: "Building2", condition: "因生活迫切需要且符合相關自治條例規定者。", documents: ["申請書", "門牌證明", "建築物位置圖及平面簡圖", "建物各方向照片4張"], notice: "僅供接水電使用，不代表建物合法化。", contact: "22757 分機32" }
        };

        const nhiServices = {
            cat5: { title: "第五類健保業務", menuTitle: "第五類健保業務(低收入戶)", subTitle: "低收入戶健保業務", icon: "Stethoscope", condition: "經本府社政部門核定為低收入戶之本鄉鄉親。", documents: ["低收入戶核定文件", "身分證", "戶口名簿"], notice: "核定後應儘速辦理身份變更。", contact: "22757 分機56" },
            cat6: { title: "第六類健保業務", menuTitle: "第六類健保業務(無工作、榮民及榮民遺眷)", subTitle: "無工作及榮民健保業務", icon: "Stethoscope", condition: "一、無職業且不符合其他類別投保資格者。\n二、具榮民或榮民遺眷身分者。", documents: ["身分證", "戶口名簿", "退保證明"], notice: "遷入者需設籍滿六個月方開投保。", contact: "22757 分機56" }
        };

        const pages = [
            { type: 'cover', title: '封面' }, { type: 'content', title: '鄉長的話' }, { type: 'menu-main', title: '手冊主目錄' }, { type: 'menu-women', title: '婦幼補助專區' },
            ...Object.values(womenServices).map(s => ({ ...s, type: 'detail' })),
            { type: 'menu-elderly', title: '銀髮補助專區' }, ...Object.values(elderlyServices).map(s => ({ ...s, type: 'detail' })),
            { type: 'menu-social', title: '社會救助專區' }, ...Object.values(socialServices).map(s => ({ ...s, type: 'detail' })),
            { type: 'menu-building', title: '建物證明專區' }, ...Object.values(buildingServices).map(s => ({ ...s, type: 'detail' })),
            { type: 'menu-nhi', title: '健保業務專區' }, ...Object.values(nhiServices).map(s => ({ ...s, type: 'detail' })),
            { type: 'detail', title: '調解業務專區', subTitle: '聲請調解事項', icon: "Scale", condition: "一、民事事件。\n二、告訴乃論之刑事事件。", documents: ["聲請調解書", "調解委任書", "撤回申請書", "發給調解不成立證明聲請書"], notice: "調解經核定與確定判決具同等效力。", contact: "22757 分機 26" },
            { type: 'detail-military', title: '兵役業務專區' }, { type: 'detail-env', title: '環境保護業務' },
            { type: 'menu-lifepark', title: '生命園區專區' }, ...Object.values(lifeParkServices).map(s => ({ ...s, type: 'detail' }))
        ];

        const totalPages = pages.length;

        // --- 4. App 元件 ---
        const App = () => {
            const [currentPage, setCurrentPage] = useState(0);
            const [currentTime, setCurrentTime] = useState(new Date());
            const scrollContainerRef = useRef(null);

            useEffect(() => { if (scrollContainerRef.current) scrollContainerRef.current.scrollTop = 0; }, [currentPage]);
            useEffect(() => { const timer = setInterval(() => setCurrentTime(new Date()), 1000); return () => clearInterval(timer); }, []);

            const timeString = currentTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false });
            const progressPercent = (currentPage / (totalPages - 1)) * 100;
            const activePage = pages[currentPage];
            const fixedCoverImageUrl = "https://images.unsplash.com/photo-1511632765486-a01980e01a18?q=80&w=1200&auto=format&fit=crop";

            const getBackTarget = (idx) => {
                if (idx === 2 || idx === 1) return 0;
                if (idx === 31) return 2; 
                const menuIndices = [3, 12, 17, 25, 28, 34];
                if (menuIndices.includes(idx)) return 2;
                if (idx >= 4 && idx <= 11) return 3;
                if (idx >= 13 && idx <= 16) return 12;
                if (idx >= 18 && idx <= 24) return 17;
                if (idx >= 26 && idx <= 27) return 25;
                if (idx >= 29 && idx <= 30) return 28;
                // 生命園區專區返回邏輯
                if (idx >= 35 && idx <= 41) return 34; 
                return 0;
            };

            const getButtonText = (idx) => {
                if (idx === 2) return '回首頁'; 
                if (idx === 31) return '回主目錄'; 
                const subMenuIndices = [3, 12, 17, 25, 28, 34];
                return subMenuIndices.includes(idx) ? '回主目錄' : '回目錄'; 
            };

            const formatListContentForApp = (text, isSpecialPage = false) => {
                if (!text) return null;
                const lines = text.split('\n').filter(line => line.trim() !== '');
                return (
                    <div className="space-y-3 mt-1 font-black">
                        {lines.map((line, index) => {
                            if (line.trim().startsWith('※') || line.trim().startsWith('註：')) {
                                return <p key={index} className="text-[0.9rem] text-rose-600 italic font-black bg-white/50 p-3 rounded-xl border-2 border-dashed border-rose-100">{line}</p>;
                            }
                            return (
                                <div key={index} className="flex gap-2 items-start font-black">
                                    <div className="mt-1.5 shrink-0"><Icon name="CircleDot" size={10} className="text-sky-400 font-black" /></div>
                                    <p className="text-[1rem] font-bold text-slate-800 leading-relaxed text-justify tracking-tight font-black">
                                        {isSpecialPage ? renderHighlightedText(line) : line}
                                    </p>
                                </div>
                            );
                        })}
                    </div>
                );
            };

            const renderPageContent = () => {
                if (activePage.type === 'cover') {
                    return (
                        <div className="flex flex-col items-center justify-start px-6 pt-4 pb-8 text-center relative animate-fade-in-up h-full font-black">
                            <div className="bg-rose-500 text-white px-5 py-2 rounded-full text-[10px] font-black tracking-[0.2em] mb-4 z-10 shadow-lg shadow-rose-200/50 flex items-center gap-1 font-black"><Icon name="Sparkles" size={12} className="text-rose-200" /> LIENCHIANG COUNTY</div>
                            <h1 className="text-5xl text-slate-800 mb-1 font-black z-10">南竿鄉公所</h1>
                            <h2 className="text-[1.5rem] text-rose-400 font-bold tracking-widest z-10 font-black">便民服務手冊</h2>
                            <div className="relative w-[280px] h-[280px] mx-auto rounded-[5rem] overflow-hidden border-[10px] border-white shadow-xl bg-white z-10 my-8 shrink-0 font-black">
                                <img src={fixedCoverImageUrl} className="w-full h-full object-cover scale-110" alt="封面" />
                                <div className="absolute bottom-6 left-0 right-0 z-20 flex justify-center font-black"><div className="text-rose-600 font-black text-base bg-white/95 px-5 py-2 rounded-full shadow-lg border border-white/50 backdrop-blur-sm">幸福南竿 · 溫暖相伴</div></div>
                            </div>
                            <button onClick={() => setCurrentPage(1)} className="z-20 px-14 py-4 bg-gradient-to-r from-rose-500 to-rose-600 text-white rounded-full font-black text-xl shadow-xl shadow-rose-custom hover:scale-105 transition-all flex items-center gap-4 group active:scale-95">進入手冊 <Icon name="ArrowRight" size={24} className="group-hover:translate-x-1 transition-transform font-black" /></button>
                            <div className="mt-auto mb-8 z-10 w-full px-4 text-left font-black">
                                <div className="bg-white/80 backdrop-blur-xl rounded-[2.5rem] p-5 shadow-xl border border-white/60 space-y-4 font-black">
                                    <div className="flex items-center gap-4 font-black"><div className="w-11 h-11 bg-rose-500 rounded-2xl flex items-center justify-center shadow-lg shadow-rose-200 shrink-0 text-white font-black"><Icon name="Phone" size={20} fill="currentColor" /></div><div className="flex flex-col font-black"><span className="text-[10px] text-rose-500 tracking-widest font-black uppercase">公所總機</span><span className="text-lg font-black tracking-widest leading-none font-black">(0836) 22757</span></div></div>
                                    <div className="flex items-center gap-4 font-black"><div className="w-11 h-11 bg-rose-500 rounded-2xl flex items-center justify-center shadow-lg shadow-rose-200 shrink-0 text-white font-black"><Icon name="MapPin" size={20} fill="currentColor" /></div><div className="flex flex-col min-w-0 font-black"><span className="text-[10px] text-rose-500 tracking-widest font-black uppercase font-black">通訊地址</span><span className="text-sm font-black truncate font-black">連江縣南竿鄉清水村132號</span></div></div>
                                </div>
                            </div>
                        </div>
                    );
                }

                if (activePage.type === 'content') {
                    return (
                        <div className="p-8 flex-1 flex flex-col font-black">
                            <div className="animate-fade-in-up flex-1 flex flex-col overflow-y-auto no-scrollbar font-black">
                                <div className="bg-gradient-to-br from-rose-50/50 via-white to-white p-6 rounded-[2.5rem] border border-rose-100 shadow-sm relative overflow-hidden mb-6 font-black"><Icon name="Quote" size={80} className="absolute -top-4 -left-4 text-rose-500 opacity-[0.05]" /><div className="relative z-10 font-black"><div className="flex gap-4 items-center mb-6 font-black"><div className="w-24 h-32 rounded-xl overflow-hidden border-4 border-white shadow-lg bg-slate-100 shrink-0 font-black"><img src="https://docs.google.com/drawings/d/e/2PACX-1vSblsfRA-zd0E8uLaoPkW1XItf04jiBX9EvzWkvkrhDWm8lZ2ntY2bG37A67Ld5R1cJ5Zghrx_fE-Lo/pub?w=400&h=300" className="w-full h-full object-cover font-black" alt="鄉長" /></div><div className="text-rose-600 font-black text-xl font-black font-black">各位鄉親大家好：</div></div><p className="text-[1.05rem] leading-relaxed text-justify indent-8 text-slate-800 mb-6 font-bold tracking-tight font-black">打造「效率、透明、溫馨」的公所環境是志東的初衷，這本便民手冊將原本複雜的申辦事項重新整理，讓鄉親們能快速準備相關資料，一次辦好，讓服務更有感、更便捷，使南竿鄉成為一個更友善溫塊且宜居的幸福家園。</p><div className="text-right border-t border-rose-100 pt-4 font-black"><span className="text-sm text-slate-500 block mb-1 font-bold tracking-widest font-black font-black font-black">南竿鄉長</span><span className="text-3xl font-black font-black">林志東</span> <span className="italic text-rose-400 font-bold font-black font-black">敬啟</span></div></div></div>
                                <button onClick={() => setCurrentPage(2)} className="w-full py-4 bg-rose-500 text-white rounded-2xl font-black shadow-lg active:scale-95 text-lg font-black font-black">進入主目錄</button>
                            </div>
                        </div>
                    );
                }

                if (activePage.type === 'menu-main') {
                    return (
                        <div className="p-8 flex-1 flex flex-col font-black">
                            <div className="grid grid-cols-1 gap-3 pb-10">
                                {[{t:3,l:'婦幼補助專區',i:"Baby"}, {t:12,l:'銀髮補助專區',i:"Heart"}, {t:17,l:'社會救助專區',i:"Users"}, {t:25,l:'建物證明專區',i:"Building2"}, {t:28,l:'健保業務專區',i:"Stethoscope"}, {t:31,l:'調解業務專區',i:"Scale"}, {t:32,l:'兵役業務專區',i:"Medal"}, {t:33,l:'環境保護業務',i:"Trash2"}, {t:34,l:'生命園區專區',i:"Milestone"}].map((btn,idx)=>(
                                    <button key={idx} onClick={()=>setCurrentPage(btn.t)} className="w-full flex items-center justify-between p-5 bg-white border border-slate-100 rounded-[2rem] shadow-sm hover:border-rose-300 transition-all group active:scale-[0.98] font-black font-black font-black font-black"><div className="flex items-center gap-5 font-black"><span className="w-10 h-10 bg-rose-50 rounded-2xl flex items-center justify-center font-black text-rose-500 group-hover:bg-rose-500 group-hover:text-white transition-colors font-black font-black">{idx+1}</span><div className="flex items-center gap-3 font-black"><Icon name={btn.i} className="text-rose-400 group-hover:scale-110 transition-transform font-black" /><span className="font-bold text-lg text-slate-700 font-black font-black">{btn.l}</span></div></div><Icon name="ChevronRight" className="text-slate-300 group-hover:text-rose-500 font-black" /></button>
                                ))}
                            </div>
                        </div>
                    );
                }

                if (activePage.type.startsWith('menu-')) {
                    const services = activePage.type === 'menu-women' ? Object.values(womenServices) : 
                                   activePage.type === 'menu-elderly' ? Object.values(elderlyServices) : 
                                   activePage.type === 'menu-social' ? Object.values(socialServices) : 
                                   activePage.type === 'menu-building' ? Object.values(buildingServices) : 
                                   activePage.type === 'menu-nhi' ? Object.values(nhiServices) : 
                                   activePage.type === 'menu-lifepark' ? Object.values(lifeParkServices) : [];
                    const actualOffsets = { 'menu-women':4, 'menu-elderly':13, 'menu-social':18, 'menu-building':26, 'menu-nhi':29, 'menu-lifepark':35 };
                    return (
                        <div className="p-8 flex-1 flex flex-col font-black">
                            <div className="space-y-3 pb-10 font-black font-black">
                                {services.map((s, i) => (
                                    <button key={i} onClick={() => setCurrentPage(actualOffsets[activePage.type] + i)} className="w-full flex items-center justify-between p-4 bg-white border-2 border-slate-50 rounded-2xl hover:border-rose-200 shadow-sm text-left active:scale-[0.99] group font-black font-black font-black"><div className="flex items-center gap-4 font-black"><div className="w-10 h-10 bg-rose-50 rounded-full flex items-center justify-center text-rose-500 group-hover:bg-rose-500 group-hover:text-white transition-all font-black font-black"><Icon name={s.icon} size={18} /></div><span className="text-slate-700 font-black font-black font-black">{s.menuTitle || s.title}</span></div><Icon name="ChevronRight" size={18} className="text-slate-300 group-hover:text-rose-500 font-black font-black" /></button>
                                ))}
                                <div className="mt-8 pt-4 font-black font-black"><button onClick={() => setCurrentPage(2)} className="w-full py-4 bg-rose-500 text-white rounded-2xl font-black shadow-lg shadow-rose-200 hover:bg-rose-600 transition-all flex items-center justify-center gap-2 active:scale-95 text-lg font-black"> <Icon name="ChevronLeft" size={20} strokeWidth={3} />返回主目錄</button></div>
                            </div>
                        </div>
                    );
                }

                if (activePage.type === 'detail-military') {
                    return (
                        <div className="p-8 flex-1 flex flex-col font-black">
                            <div className="space-y-6 animate-fade-in-up flex-1 pb-20 font-black font-black">
                                <ContactGrid idx={currentPage} />
                                <div className="space-y-5 px-1 text-left">
                                    {militaryServicesList.map((item, idx) => (
                                        <div key={idx} className="bg-white border-2 border-rose-200 rounded-[2.5rem] shadow-xl shadow-slate-900/5 overflow-hidden transition-all duration-300 hover:border-rose-400 font-black">
                                            <div className="p-5 flex items-center gap-4 bg-slate-50/50 border-b border-rose-100 font-black font-black"><div className={`w-12 h-12 rounded-2xl flex items-center justify-center shadow-sm font-black ${item.color === 'blue' ? 'bg-blue-50 text-blue-600' : item.color === 'emerald' ? 'bg-emerald-50 text-emerald-600' : item.color === 'indigo' ? 'bg-indigo-50 text-indigo-600' : item.color === 'amber' ? 'bg-amber-50 text-amber-600' : item.color === 'rose' ? 'bg-rose-50 text-rose-600' : item.color === 'cyan' ? 'bg-cyan-50 text-cyan-600' : item.color === 'violet' ? 'bg-violet-50 text-violet-600' : 'bg-slate-50 text-slate-600'}`}><Icon name={item.icon} size={24} strokeWidth={2.5} /></div><h4 className="text-slate-800 font-black text-lg leading-tight flex-1 font-black">{item.title}</h4></div>
                                            <div className="p-6 font-black font-black"><div className="flex items-center gap-2 mb-4 text-rose-500 text-xs font-black uppercase tracking-widest border-b border-rose-50 pb-2 w-fit font-black"><Icon name="FileText" size={14} /> 應備文件清單</div><ul className="space-y-3 font-black">{item.docs.map((doc, dIdx) => (<li key={dIdx} className="flex items-start gap-3 text-[0.95rem] text-slate-600 font-bold leading-relaxed font-black"> <Icon name="CheckCircle" size={16} className="text-emerald-500 shrink-0 mt-1 font-black" /><span>{doc}</span></li>))}</ul></div>
                                        </div>
                                    ))}
                                </div>
                                <section className="bg-amber-50 p-6 rounded-[2.5rem] border-2 border-amber-200 shadow-sm flex gap-4 mt-4 font-black"><Icon name="Info" size={28} className="text-amber-500 shrink-0 mt-1 font-black" /><div className="space-y-1 font-black"><span className="text-amber-700 font-black underline decoration-amber-200 underline-offset-4 font-black">貼心提醒</span><p className="text-[1.05rem] text-slate-700 font-bold leading-relaxed">請確認文件正本齊全，如有疑慮請撥分機 22 洽詢。</p></div></section>
                                <div className="mt-12 pt-6 font-black font-black font-black"><button onClick={() => setCurrentPage(2)} className="w-full py-4 bg-rose-500 text-white rounded-2xl font-black shadow-lg shadow-rose-200 hover:bg-rose-600 transition-all flex items-center justify-center gap-2 active:scale-95 text-lg font-black font-black font-black"> <Icon name="ChevronLeft" size={20} strokeWidth={3} />返回主目錄</button></div>
                            </div>
                        </div>
                    );
                }

                if (activePage.type === 'detail-env') {
                    return (
                        <div className="p-8 flex-1 flex flex-col font-black">
                            <div className="space-y-6 animate-fade-in-up flex-1 pb-20 text-left font-black">
                                <div className="flex items-center gap-2 mb-[-8px] px-2 font-black italic text-rose-500 font-black font-black"><Icon name="Trash2" /><span>環境保護業務說明</span></div>
                                <section className="bg-gradient-to-br from-emerald-500 to-emerald-600 p-6 rounded-[2.5rem] shadow-xl relative overflow-hidden text-white group border-b-4 border-emerald-700/30 font-black"><div className="relative z-10 font-black font-black"><div className="flex items-center gap-3 mb-4"><div className="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-md shadow-inner font-black"><Icon name="Search" size={26} strokeWidth={3} /></div><span className="font-black text-xl tracking-tight">垃圾車即時行程查詢</span></div><div className="space-y-4 font-black"><p className="text-emerald-50 font-bold leading-relaxed text-[1.05rem]">請至「樂圾通」網頁版查詢行程，或手機下載 App 即時掌握位置。</p><a href="https://www.gup.com.tw/garbageMap/" target="_blank" className="inline-flex items-center gap-3 bg-white text-emerald-600 px-6 py-2.5 rounded-full font-black text-sm shadow-lg hover:shadow-emerald-200 transition-all active:scale-95 font-black">進入查詢系統 <Icon name="ArrowRight" size={16} strokeWidth={3} /></a></div></div><Icon name="Truck" size={120} className="absolute -bottom-4 -right-4 text-white opacity-10 rotate-12 group-hover:rotate-0 transition-transform duration-1000" /></section>
                                <section className="bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-xl shadow-slate-900/5 space-y-5 font-black font-black font-black font-black"><div className="flex items-center gap-3 text-sky-700 border-b border-sky-50 pb-4 font-black"><div className="w-10 h-10 bg-sky-50 rounded-xl flex items-center justify-center text-sky-500 font-black"><Icon name="Box" size={24} /></div><span className="font-black text-xl">大型傢俱回收載運</span></div><div className="grid gap-4 font-black"><div className="bg-sky-50/50 p-5 rounded-[1.5rem] border border-sky-100/50 font-black font-black"><p className="text-slate-800 font-black mb-2 text-lg">木製傢俱 (連江縣環資局)</p><div className="flex items-center gap-2 text-rose-600 font-black font-black font-black font-black"><Icon name="Phone" size={16} fill="currentColor" /><span className="font-black text-[1.05rem]">26520 分機 165</span></div></div><div className="bg-indigo-50/50 p-5 rounded-[1.5rem] border border-indigo-100/50 font-black font-black"><p className="text-slate-800 font-black mb-2 text-lg font-black font-black">廢電器、床墊 (志剛環保)</p><div className="flex items-center gap-2 text-rose-600 font-black"><Icon name="Phone" size={16} fill="currentColor" /><span className="font-black text-[1.05rem]">23417</span></div></div></div></section>
                                <section className="bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-xl shadow-slate-900/5 space-y-6 font-black font-black font-black"><div className="flex items-center gap-3 text-slate-800 border-b border-slate-50 pb-4 font-black font-black"><div className="w-10 h-10 bg-rose-50 rounded-xl flex items-center justify-center text-rose-500 font-black"><Icon name="Recycle" size={24} /></div><span className="font-black text-xl font-black font-black">定期回收時間表</span></div><div className="space-y-6 font-black font-black font-black font-black font-black"><div className="flex items-start gap-4 font-black font-black"><div className="w-1.5 h-16 bg-amber-400 rounded-full shrink-0 font-black"></div><div className="space-y-2 flex-1 font-black font-black"><p className="font-black text-slate-800 text-lg leading-tight">各村紙箱及塑膠瓶罐回收</p><div className="flex flex-wrap gap-2">{['一', '三', '五', '六'].map(d => (<span key={d} className="bg-amber-100/50 text-amber-800 text-sm px-3 py-1 rounded-xl border border-amber-200 font-black shadow-sm">週{d}</span>))}</div><p className="text-[1rem] text-rose-600 italic font-bold font-black">晚上隨垃圾車行程</p></div></div><div className="flex items-start gap-4 font-black font-black"><div className="w-1.5 h-16 bg-green-500 rounded-full shrink-0 font-black font-black font-black font-black"></div><div className="space-y-2 flex-1 font-black font-black font-black font-black"><p className="font-black text-slate-800 text-lg leading-tight">各村廚餘回收</p><div className="inline-block bg-green-100/5 text-green-800 text-sm px-4 py-1.5 rounded-xl border border-green-200 font-black shadow-sm font-black font-black font-black">星期一 至 星期六</div><p className="text-[1rem] text-rose-600 italic font-bold">晚上隨垃圾車行程</p></div></div></div></section>
                                <ContactGrid idx={currentPage} /><section className="bg-amber-50 p-6 rounded-[2.5rem] border-2 border-amber-200 shadow-sm flex gap-4 mt-8 font-black font-black font-black font-black font-black"><Icon name="Info" size={28} className="text-amber-500 shrink-0 mt-1 font-black font-black font-black font-black" /><div className="space-y-1 font-black"><span className="text-amber-700 font-black underline decoration-amber-200 underline-offset-4 font-black font-black">貼心提醒</span><p className="text-[1.05rem] text-slate-700 font-bold指標 leading-relaxed font-black">星期日停收垃圾、資源回收及廚餘載運服務。</p></div></section>
                                <div className="mt-12 pt-6 font-black font-black font-black"><button onClick={() => setCurrentPage(2)} className="w-full py-4 bg-rose-500 text-white rounded-2xl font-black shadow-lg active:scale-95 text-lg font-black font-black font-black"> <Icon name="ChevronLeft" size={20} strokeWidth={3} />返回主目錄</button></div>
                            </div>
                        </div>
                    );
                }

                if (activePage.type === 'detail') {
                    return (
                        <div className="p-8 flex-1 flex flex-col font-black">
                            <div className="space-y-6 animate-fade-in-up flex-1 pb-20 text-left font-black">
                                <div className="flex items-center gap-2 mb-[-8px] px-2 font-black italic text-rose-500 font-black font-black"><Icon name={activePage.icon || "Info"} size={20} /><span>{activePage.subTitle || "業務說明"}</span></div>
                                <section className="bg-gradient-to-br from-sky-50 to-white p-6 rounded-[2.5rem] border border-sky-100 shadow-xl shadow-slate-900/5 font-bold font-black">
                                    <div className="flex items-center gap-2 mb-4 text-sky-700 font-black">
                                        <Icon name="ShieldCheck" size={20} className="text-sky-500 font-black" />
                                        <span>{activePage.title === '環保金爐收費標準' || activePage.title === '納骨堂使用申請' || activePage.title === '禮廳使用申請' || activePage.title === '公墓區申請' || activePage.title === '遺體冷藏申請' || activePage.title === '火化場申請' ? '收費標準' : (activePage.title === "調解業務專區" ? "辦理調解項目" : "申請對象及條件")}</span>
                                    </div>
                                    {activePage.isTable ? (
                                        <div className="overflow-hidden border border-slate-100 rounded-2xl shadow-sm bg-white mt-2 font-black">
                                            <table className="w-full text-left text-sm font-black font-black font-black font-black">
                                                <thead className="bg-slate-50 text-slate-600 font-black font-black">
                                                    <tr>{activePage.tableHeaders.map((h, i) => (<th key={i} className="px-3 py-3 border-b border-slate-100 font-black font-black">{h}</th>))}</tr>
                                                </thead>
                                                <tbody className="divide-y divide-slate-50 font-black font-black">
                                                    {activePage.tableRows.map((row, i) => (
                                                        <tr key={i} className="hover:bg-slate-50/50 transition-colors font-black">
                                                            <td className="px-3 py-4 text-slate-700 font-black leading-snug font-black">{row[0]}</td>
                                                            <td className="px-3 py-4 text-slate-500 font-black font-black">{row[1]}</td>
                                                            <td className="px-3 py-4 text-rose-600 font-black whitespace-nowrap font-black font-black">{row[2]}</td>
                                                            <td className="px-3 py-4 text-rose-600 font-black whitespace-nowrap font-black font-black">{row[3]}</td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    ) : (
                                        formatListContentForApp(activePage.condition, (activePage.title === '環保金爐收費標準' || activePage.title === '納骨堂使用申請' || activePage.title === '禮廳使用申請' || activePage.title === '公墓區申請' || activePage.title === '遺體冷藏申請' || activePage.title === '火化場申請'))
                                    )}
                                </section>
                                {activePage.standard && <section className="bg-gradient-to-br from-indigo-50 to-white p-6 rounded-[2.5rem] border border-indigo-100 shadow-xl shadow-indigo-900/5 font-bold font-black"> <div className="flex items-center gap-2 mb-4 text-indigo-700 font-black font-black"> <Icon name="Info" size={20} className="text-indigo-500 font-black font-black" /><span>補助項目與標準</span></div>{formatListContentForApp(activePage.standard)}</section>}
                                {activePage.amounts && <div className="mt-6 p-6 bg-white border border-rose-100 rounded-[2.5rem] shadow-xl shadow-rose-900/5 font-black font-black font-black font-black"><div className="flex items-center gap-2 mb-4 text-rose-600 font-black font-black font-black"><Icon name="Coins" size={20} className="animate-pulse font-black" /><span>補助額度參考</span></div><div className="space-y-3 font-black font-black">{activePage.amounts.map((item, i) => (<div key={i} className="flex justify-between items-center bg-rose-50/50 p-4 rounded-3xl border border-rose-100/30 font-black font-black"><span className="text-sm font-black text-slate-700 font-black font-black font-black">{item.label}</span><div className="flex items-baseline gap-1 font-black font-black font-black"><span className="text-[10px] text-rose-400 italic font-black font-black">NT$</span><span className="text-2xl text-rose-600 tracking-tighter font-black font-black font-black"> {item.value}</span><span className="text-[10px] text-slate-400 ml-1 font-bold font-black">元</span></div></div>))}</div></div>}
                                <ContactGrid idx={currentPage} customContact={activePage.contact} />
                                {activePage.documents && <section className="px-2 font-black font-black font-black font-black"><div className="flex items-center gap-2 mb-4 text-slate-800 italic font-black font-black"><Icon name="FileText" size={18} className="text-rose-400 font-black font-black" />應備文件清單</div><div className="space-y-2 font-black font-black font-black">{activePage.documents.map((doc, i) => (<div key={i} className={`flex items-start gap-3 p-4 rounded-2xl transition-colors font-black ${doc.startsWith('【') ? 'bg-slate-100 border-none mt-4 text-slate-900 font-black shadow-inner font-black' : 'bg-white border border-slate-100 shadow-sm text-slate-700 font-bold font-black'}`}>{!doc.startsWith('【') && <Icon name="CheckCircle" size={16} className="text-emerald-500 shrink-0 mt-1 font-black font-black"/>}<span className="text-[0.9rem] leading-relaxed font-black font-black font-black font-black font-black">{doc}</span></div>))}</div></section>}
                                {activePage.notice && <section className="bg-amber-50 p-6 rounded-[2.5rem] border-2 border-amber-200 shadow-sm flex gap-4 mt-8 font-black font-black font-black font-black"><Icon name="Info" size={28} className="text-amber-500 shrink-0 mt-1 font-black font-black" /><div className="space-y-1 text-left font-black font-black font-black"><span className="text-amber-700 font-black underline decoration-amber-200 underline-offset-4 font-black font-black">貼心提醒</span><div className="text-[1.05rem] text-slate-700 font-bold leading-relaxed whitespace-pre-line font-black font-black font-black font-black font-black">{activePage.notice}</div></div></section>}
                                <div className="mt-12 pt-6 font-black font-black font-black font-black font-black"><button onClick={() => setCurrentPage(getBackTarget(currentPage))} className="w-full py-4 bg-rose-500 text-white rounded-2xl font-black shadow-lg shadow-rose-200 hover:bg-rose-600 transition-all flex items-center justify-center gap-2 active:scale-95 text-lg font-black font-black font-black"> <Icon name="ChevronLeft" size={20} strokeWidth={3} />{getButtonText(currentPage)}</button></div>
                            </div>
                        </div>
                    );
                }
            };

            return (
                <div className="bg-slate-200 flex items-center justify-center p-4 selection:bg-rose-100 text-slate-900 font-bold font-black">
                    <div className="relative w-full max-w-[420px] h-[820px] bg-slate-900 rounded-[3.5rem] phone-frame overflow-hidden flex flex-col font-sans font-black">
                        <div className="h-10 bg-slate-900 flex justify-between px-10 items-center text-[10px] text-white/80 font-bold shrink-0 font-black">
                            <span>{timeString}</span>
                            <div className="flex gap-1.5 items-center font-black"><Icon name="Signal" size={12} /><Icon name="Wifi" size={12} /><Icon name="Battery" size={14} className="rotate-90" /></div>
                        </div>
                        <div ref={scrollContainerRef} className="flex-1 overflow-y-auto no-scrollbar bg-white flex flex-col font-bold font-black">
                            {currentPage !== 0 && (
                                <div className="p-8 flex justify-between items-center mb-0 shrink-0 overflow-hidden font-black">
                                    <div className="flex gap-3 items-center truncate font-black font-black">
                                        {currentPage >= 2 && <button onClick={() => setCurrentPage(getBackTarget(currentPage))} className="bg-rose-50 text-rose-600 px-4 py-1.5 rounded-full text-xs font-black active:scale-95 flex items-center gap-1 shrink-0 border border-rose-100 shadow-sm font-black"><Icon name="ChevronLeft" size={14} strokeWidth={3}/><span className="font-black uppercase tracking-tight">{getButtonText(currentPage)}</span></button>}
                                        <h3 className="text-2xl font-black border-l-[6px] border-rose-500 pl-3 tracking-tight truncate text-slate-800 font-black">{activePage.title}</h3>
                                    </div>
                                </div>
                            )}
                            {renderPageContent()}
                        </div>
                        <div className="h-28 border-t border-slate-100 bg-white/95 backdrop-blur-md flex flex-col items-center justify-center px-8 shrink-0 z-40 font-black">
                            <div className="flex items-center justify-between w-full mb-3 font-black">
                                <button onClick={() => setCurrentPage(Math.max(0, currentPage - 1))} className={`w-12 h-12 flex items-center justify-center rounded-2xl transition-all active:scale-90 shadow-sm ${currentPage === 0 ? 'bg-slate-50 text-slate-200' : 'bg-slate-100 text-slate-700 hover:bg-rose-500 hover:text-white'}`} disabled={currentPage === 0}><Icon name="ChevronLeft" size={24} strokeWidth={3}/></button>
                                <div className="flex items-center gap-3 bg-slate-100 px-6 py-2 rounded-2xl font-black font-black font-black font-black"><span className="text-xl text-rose-600 font-black">{(currentPage + 1).toString().padStart(2, '0')}</span><span className="text-sm text-slate-300 font-black">/</span><span className="text-sm text-slate-500 font-black">{totalPages.toString().padStart(2, '0')}</span></div>
                                <button onClick={() => setCurrentPage(Math.min(totalPages - 1, currentPage + 1))} className={`w-12 h-12 flex items-center justify-center rounded-2xl transition-all active:scale-90 shadow-sm ${currentPage === totalPages - 1 ? 'bg-slate-50 text-slate-200' : 'bg-slate-100 text-slate-700 hover:bg-rose-500 hover:text-white'}`} disabled={currentPage === totalPages - 1}><Icon name="ChevronRight" size={24} strokeWidth={3}/></button>
                            </div>
                            <div className="w-full h-1.5 bg-slate-100 rounded-full overflow-hidden font-black"><div className="h-full bg-gradient-to-r from-rose-400 to-rose-600 transition-all duration-500 ease-out shadow-[0_0_10px_rgba(225,29,72,0.3)] font-black" style={{ width: `${progressPercent}%` }}></div></div>
                        </div>
                    </div>
                </div>
            );
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>